<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>GeoServer WFS + OSM</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol/ol.css">
  <style>
    #map {
      width: 600px;
      height: 500px;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://cdn.jsdelivr.net/npm/ol/dist/ol.js"></script>
  <script>
    // OSM 배경지도 레이어
    const osmLayer = new ol.layer.Tile({
      source: new ol.source.OSM()
    });

    // GeoServer WFS 벡터 레이어
    const wfsLayer = new ol.layer.Vector({
      source: new ol.source.Vector({
        format: new ol.format.GeoJSON(),
        url: function(extent) {
//          return '/geoserver/wfs?' +
          return 'http://localhost:8060/geoserver/wfs?' +
            'service=WFS&version=1.1.0&request=GetFeature&' +
            'typename=ne_110m_admin_0_countries&' +                 // GeoServer 레이어 이름
            'outputFormat=application/json&' +            // 응답 형식
            'srsname=EPSG:4326&' +                        // 좌표계
            'bbox=' + extent.join(',') + ',EPSG:4326';    // 현재 지도 범위
        },
        strategy: ol.loadingstrategy.bbox
      }),
      style: new ol.style.Style({
        stroke: new ol.style.Stroke({
          color: '#0000ff',
          width: 2
        })
      })

    });

    // 지도 객체 생성
    const map = new ol.Map({
      target: 'map',
      layers: [osmLayer, wfsLayer],   // OSM + WFS 레이어 함께 추가
      view: new ol.View({
        center: ol.proj.fromLonLat([0, 0]), // 세계 중심
        zoom: 1
      })
    });
  </script>
</body>
</html>